<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Personal Auto</title>
  <style>
    :root {
      --page-bg: #f8f4e8;
      --panel-bg: #fdfcf8;
      --border: #b7b2a4;
      --label: #222;
      --accent: #6b6257;
      --nav-active: #d9d2c3;
      --btn: #c6b9a2;
      --btn-text: #1f1b17;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      background: var(--page-bg);
      color: var(--label);
      font-family: "Segoe UI", Tahoma, sans-serif;
    }
    .page {
      max-width: 1400px;
      width: 100%;
      margin: 16px auto;
      padding: 10px 18px 30px;
      display: grid;
      grid-template-columns: 230px 1fr;
      column-gap: 18px;
    }
    .step-list {
      border: 1px solid var(--border);
      background: var(--panel-bg);
      padding: 12px 10px;
      list-style: none;
      margin: 0;
      min-height: 760px;
    }
    .step-list li {
      padding: 10px 12px;
      border-left: 4px solid transparent;
      cursor: pointer;
      color: var(--accent);
      font-weight: 600;
    }
    .step-list li.active {
      background: var(--nav-active);
      border-color: #b09a7a;
    }
    .frame-shell {
      border: 1px solid var(--border);
      background: var(--panel-bg);
      min-height: 760px;
      height: calc(100vh - 140px);
      display: flex;
      flex-direction: column;
    }
    iframe {
      border: none;
      width: 100%;
      flex: 1;
      background: var(--panel-bg);
    }
    .actions {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      padding: 10px;
      border-top: 1px solid var(--border);
      background: var(--panel-bg);
    }
    .btn {
      border: 1px solid #9f9380;
      background: var(--btn);
      color: var(--btn-text);
      padding: 8px 16px;
      font-size: 14px;
      cursor: pointer;
      min-width: 90px;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="page">
    <ol class="step-list" id="stepNav">
      <li data-step="1" class="active">1. Named Insured</li>
      <li data-step="2">2. Current Mailing Address</li>
      <li data-step="3">3. Driver Information</li>
      <li data-step="4">4. Vehicle Information</li>
      <li data-step="5">5. Coverages</li>
      <li data-step="6">6. Prior Policy Information</li>
      <li data-step="7">7. Additional Information</li>
    </ol>

    <div class="frame-shell">
      <iframe id="stepFrame" title="Personal Auto Form" src="personal-auto/steps/step1.html"></iframe>
      <div class="actions">
        <button type="button" class="btn" id="prevBtn">Previous</button>
        <button type="button" class="btn" id="nextBtn">Next</button>
        <button type="button" class="btn" id="saveBtn">Save</button>
        <button type="button" class="btn" id="shareBtn">Share</button>
      </div>
    </div>
  </div>

  <script src="personal-auto/config.js"></script>
  <script>
    const stepFiles = [
      'personal-auto/steps/step1.html',
      'personal-auto/steps/step2.html',
      'personal-auto/steps/step3.html',
      'personal-auto/steps/step4.html',
      'personal-auto/steps/step5.html',
      'personal-auto/steps/step6.html',
      'personal-auto/steps/step7.html',
    ];

    const cfg = window.personalAutoConfig || {};
    const labels = cfg.buttons || { prev: 'Previous', next: 'Next', save: 'Save', share: 'Share' };
    const navItems = Array.from(document.querySelectorAll('#stepNav li'));
    const frame = document.getElementById('stepFrame');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const saveBtn = document.getElementById('saveBtn');
    const shareBtn = document.getElementById('shareBtn');
    prevBtn.textContent = labels.prev || 'Previous';
    nextBtn.textContent = labels.next || 'Next';
    saveBtn.textContent = labels.save || 'Save';
    shareBtn.textContent = labels.share || 'Share';

    let currentStep = 1;

    function loadStep(step) {
      currentStep = step;
      frame.src = stepFiles[step - 1];
      navItems.forEach((item) => item.classList.toggle('active', Number(item.dataset.step) === step));
      const last = stepFiles.length;

      const vis = (cfg.visibleByStep && cfg.visibleByStep[step]) || null;
      const showPrev = vis ? !!vis.prev : step > 1;
      const showNext = vis ? !!vis.next : step < last;
      const showSave = vis ? !!vis.save : step === last;
      const showShare = vis ? !!vis.share : step === last;

      prevBtn.style.display = showPrev ? 'inline-block' : 'none';
      nextBtn.style.display = showNext ? 'inline-block' : 'none';
      saveBtn.style.display = showSave ? 'inline-block' : 'none';
      shareBtn.style.display = showShare ? 'inline-block' : 'none';
    }

    navItems.forEach((item) => item.addEventListener('click', () => loadStep(Number(item.dataset.step))));
    prevBtn.addEventListener('click', () => { if (currentStep > 1) loadStep(currentStep - 1); });
    nextBtn.addEventListener('click', () => { if (currentStep < stepFiles.length) loadStep(currentStep + 1); });
    saveBtn.addEventListener('click', () => {
      if (cfg.handlers && typeof cfg.handlers.save === 'function') cfg.handlers.save(currentStep);
      else alert('Saved');
    });
    shareBtn.addEventListener('click', () => {
      if (cfg.handlers && typeof cfg.handlers.share === 'function') cfg.handlers.share(currentStep);
      else alert('Shared');
    });

    loadStep(1);
  </script>
</body>
</html>

{
  "long_term_memory": "Platform: Connsura is a client-only insurance profile sharing platform.\n\nStorage:\n- Local dev DB: PostgreSQL (default localhost).\n- Staging DB: PostgreSQL (Docker) with data at /opt/connsura/postgres.\n- Uploads stored on disk: /opt/connsura/uploads (server) and connsura-backend/uploads (local).\n- Forms served from connsura-backend/forms.\n\nModels:\n- User with role (CUSTOMER) and 1:1 Customer.\n- Customer fields include preferredLangs, priorInsurance, coverages, profileData (JSON strings), plus profileData.forms for CreateProfile data.\n- ProfileShare tracks share tokens, code hashes, sections/snapshot, editable status, pending edits, optional recipient name, last access time.\n- Driver and Vehicle rows belong to Customer.\n- AdminUser and AuditLog for admin operations.\n- NotificationLog, ErrorEvent, UserDevice, UserSession, LegalDocument, UserConsent, EmailOtp/EmailOtpRequest for security, compliance, and audit.\n\nData flows:\n- Customer profile updates replace drivers/vehicles.\n- CreateProfile auto-saves forms into customer.profileData.forms.\n- Profile sharing requires emailVerified true; public links require a 4-digit code and optional recipient name.\n- Auth recovery uses TOTP secrets and backup codes; recovery ID verifies account before password reset.\n- Editable shares store pending edits and apply to profileData.forms after client approval.\n\nOpen questions:\n- Data retention and backup policy not documented.\n- Production DB strategy not documented.\n\nNext steps:\n- Update memory after deploy or major data model changes.",
  "messages": [],
  "docs_index": {
    "embedding_model": "text-embedding-3-small",
    "chunks": []
  }
}
